[tox]
requires =
    tox>=4
env_list = memray, py{38,39,310,311}

[testenv]
description = run profile tests
commands =
    ./tests/profile/wordcount.py

[testenv:memray]
description = run memray tests
deps =
    memray>=1.11.0
allowlist_externals =
    mkdir
commands =
    mkdir .profiles
    memray {posargs:run --native -o .profiles/wordcount_mdict.bin tests/profile/wordcount.py} 
    memray {posargs:run -o .profiles/wordcount_dict.bin tests/profile/wordcount.py dict}
